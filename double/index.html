<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="application-name" content="–õ—é–¥–∏ —Å –¥–≤–æ–π–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º">
		<meta name="apple-mobile-web-app-title" content="–õ—é–¥–∏ —Å –¥–≤–æ–π–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º">
		<meta name="theme-color" content="#eeeeee">
		<meta name="msapplication-navbutton-color" content="#eeeeee">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="msapplication-starturl" content="/">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<link rel="icon" type="image/jpeg" sizes="256x256" href="https://hsto.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg">
		<link rel="apple-touch-icon" type="image/jpeg" sizes="256x256" href="https://hsto.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>–õ—é–¥–∏ —Å –¥–≤–æ–π–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/gridjs/6.0.6/theme/mermaid.min.css" rel="stylesheet">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gridjs/6.0.6/gridjs.production.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://unpkg.com/gridjs@6.0.6/l10n/dist/l10n.umd.js"></script>
		<style>
			@media print {
				.noprint {
					display: none;
				}
				.print {
					display: block;
				}
			}
		</style>
    </head>
    <body>
        <nav class="navbar bg-body-tertiary noprint">
			<div class="container-fluid">
				<span class="navbar-brand mb-0 h1"><img src="https://habrastorage.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg" alt="Logo" width="30" height="30" class="d-inline-block align-text-top"> –õ—é–¥–∏ —Å –¥–≤–æ–π–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º</span>
			</div>
		</nav>
        <div class="container noprint">
			<br>
			<div class="row">
				<center>
                    <div id="loading">
						<div class="card mb-4">
							<div class="card-body">
								<center>
									<div class="p-3">
										<p>–î–≤–æ–π–Ω–æ–π —Å—Ç–∞—Ç—É—Å - —ç—Ç–æ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ –æ —á–µ–ª–æ–≤–µ–∫–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ<br>–≤ —Ä–µ–µ—Å—Ç—Ä–µ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –ú–∏–Ω—é—Å—Ç–∞ –∏ –≤ —Ä–µ–µ—Å—Ç—Ä–µ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç–æ–≤/—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–æ–≤ –†–æ—Å—Ñ–∏–Ω–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.<br></p>
                        				<div class="card mb-4">
											<div align="left" class="card-header"><span class="small ms-1">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
											<div class="card-body">
                        						<div class="progress" role="progressbar">
                            						<div id="bar" class="progress-bar" style="width: 0%;"></div>
                        						</div>
											</div>
										</div>
									</div>
								</center>
							</div>
						</div>
                    </div>
					<div id="reestr"></div>
				</center>
			</div>
		</div>
		<footer class="noprint">
			<center>
				<br>
				<p>&copy; 2024, <a href="https://li0ard.github.io">li0ard</a>. Made with üïäÔ∏è</p>
				<br>
			</center>
		</footer>
        <script>
            (async function (){
                document.getElementById("bar").style.width = "20%"
                let inoagents = await fetch(`https://raw.githubusercontent.com/fz255/foreign-agents/main/registry.json`)
                inoagents = await inoagents.json()
                
                document.getElementById("bar").style.width = "40%"
                let fedsfm = await fetch(`https://apiv2.li0ard.rest/cors?url=https://extrem.ishukshin.ru/json/all`)
                fedsfm = await fedsfm.json()
                
                document.getElementById("bar").style.width = "60%"
                inoagents = inoagents.filter(i => i.dob != "").map(i => [
                    i.fullName.toUpperCase().trim().replace(/ \(.+\)/gm, ``),
                    i.dob,
					i.dateIn
                ])
                
                document.getElementById("bar").style.width = "80%"
                fedsfm = fedsfm.filter(i => !!i.birth).map(i => [
					i.name_full.replace("*", ""),
					i.birth.replace(" –≥.—Ä.", ""),
					i.added_at
				])

                let result = []

                for(let i of inoagents) {
                    if(fedsfm.filter(j => j[0] == i[0] && j[1] == i[1]).length != 0) {
                        result.push([
							...i,
							fedsfm.filter(j => j[0] == i[0] && j[1] == i[1])[0][2]
						])
                    }
                }
                document.getElementById("bar").style.width = "80%"
                
                const grid = new gridjs.Grid({
				    columns: [
						"–§–ò–û", 
						{
                        	name: "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è",
                        	sort: false
                    	}, 
						{
                        	name: gridjs.html("–í–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ä–µ–µ—Å—Ç—Ä<br>–ú–∏–Ω—é—Å—Ç–∞"),
                        	sort: false
                    	}, 
						{
                        	name: gridjs.html("–í–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ä–µ–µ—Å—Ç—Ä<br>–†–æ—Å—Ñ–∏–Ω–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"),
                        	sort: false,
                        	formatter: (cell) => {
                            	cell = cell.replace("BEFORE", "–¥–æ 08.2018")
                            	return cell
                        	}
                    	}
					],
                    data: result,
				    pagination: {
				    	limit: 10
				    },
                    sort: true,
				    fixedHeader: true,
				    search: {
				    	ignoreHiddenColumns: false,
				    },
				    language: gridjs.l10n.ruRU,
			    })
                document.getElementById("loading").style.display = "none"
			    grid.render(document.getElementById("reestr"));
            })()
        </script>
    </body>
</html>