import{_ as p}from"./PieChart.vue_vue_type_script_setup_true_lang-BWEX3Yjv.js";import{_ as h}from"./LineChart.vue_vue_type_script_setup_true_lang-CRwg1KJH.js";import{_}from"./BarChart.vue_vue_type_script_setup_true_lang-BXv4UY0N.js";import{e as f,r as m,o as l,c as b,a as s,f as i,w as c,g as d,h as n}from"./index-Dn4RknuI.js";const g={style:{"margin-top":"20px"},class:"wrapper d-flex flex-column min-vh-100"},y={class:"body flex-grow-1"},v={class:"container-lg px-4"},w={class:"row row-cols-1 row-cols-md-2"},C={class:"col"},k={class:"card mb-4"},S=s("div",{class:"card-header"},[s("span",{class:"small ms-1"},"По типу агента")],-1),$={class:"card-body"},B={class:"p-3"},R={class:"col"},V={class:"card mb-4"},Y=s("div",{class:"card-header"},[s("span",{class:"small ms-1"},"По основанию")],-1),N={class:"card-body"},j={class:"p-3"},D={class:"row"},F={class:"col"},H={class:"card mb-4"},L=s("div",{class:"card-header"},[s("span",{class:"small ms-1"},"Кол-во включений и исключений по годам")],-1),W={class:"card-body"},z={class:"p-3"},E={class:"btn-group mt-3",role:"group"},I={data(){return{loaded:!1,charts:{selected:"line",type:{data:{},options:{}},law:{data:{},options:{}},years:{data:{},options:{}}}}},mounted(){fetch("https://raw.githubusercontent.com/fz255/foreign-agents/main/registry.json").then(a=>a.json()).then(a=>{let t=a.filter(o=>o.inn.length==10).length,e=a.filter(o=>o.dob!=""||o.inn.length==12).length;this.charts.type={data:{labels:["Юридические лица","Физические лица","Прочее"],datasets:[{data:[t,e,a.length-(t+e)],backgroundColor:["#ff5722","#00e676","#1e88e5"],borderWidth:.5,borderColor:"#ddd"}]},options:{plugins:{title:{display:!0,text:"По типу агента"},subtitle:{display:!0,text:`Всего: ${a.length} записей`}}}},this.charts.law={data:{labels:["ст. 2.1 272-ФЗ *",'ст. 6 Закона "О СМИ"','ст. 25.1 Закона "О СМИ" *',"cт. 29.1 82-ФЗ *","ст. 32 7-ФЗ","ст. 7 255-ФЗ","ст. 9 255-ФЗ"],datasets:[{data:this.filterLaw(a),backgroundColor:["#4dc9f6","#f67019","#f53794","#acc236","#00a950","#58595b","#8549ba"],borderWidth:.5,borderColor:"#ddd"}]},options:{plugins:{title:{display:!0,text:"По основанию"},subtitle:{display:!0,text:"* - статья утратила силу"}}}},this.charts.years={data:{labels:this.generateYears(2013),datasets:[{label:"Внесено",backgroundColor:"#1e88e5",borderColor:"#1e88e5",data:this.filter(a,"dateIn",2013),pointStyle:"circle",pointRadius:5,pointHoverRadius:10},{label:"Исключено",backgroundColor:"#ff5722",borderColor:"#ff5722",data:this.filter(a,"dateOut",2013),pointStyle:"circle",pointRadius:5,pointHoverRadius:10}]},options:{plugins:{title:{display:!0,text:"По кол-ву внесений/исключений"},subtitle:{display:!0,text:"* - на момент последнего обновления"}}}},this.loaded=!0})},methods:{generateYears:a=>{let t=new Date().getFullYear(),e=[];for(;a<t;)e.push((a++).toString());return e.push(`${t} *`),e},filter:(a,t,e)=>{let o=new Date().getFullYear(),r=[];for(;e<=o;)r.push(a.filter(u=>u[t].includes(e.toString())).length),e++;return r},filterLaw:a=>{let t=["Статья 2.1","Статья 6","Статья 25.1","Статья 29.1","Статья 32","Статья 7","Статья 9"],e=[];for(let o of t)e.push(a.filter(r=>r.law.includes(o)).length);return e}}},J=f({...I,__name:"StatsView",setup(a){return(t,e)=>{const o=m("center");return l(),b("main",null,[s("div",g,[s("div",y,[s("div",v,[s("div",w,[s("div",C,[s("div",k,[S,s("div",$,[i(o,null,{default:c(()=>[s("div",B,[t.loaded?(l(),d(p,{key:0,data:t.charts.type.data,options:t.charts.type.options},null,8,["data","options"])):n("",!0)])]),_:1})])])]),s("div",R,[s("div",V,[Y,s("div",N,[i(o,null,{default:c(()=>[s("div",j,[t.loaded?(l(),d(p,{key:0,data:t.charts.law.data,options:t.charts.law.options},null,8,["data","options"])):n("",!0)])]),_:1})])])])]),s("div",D,[s("div",F,[s("div",H,[L,s("div",W,[s("div",z,[i(o,null,{default:c(()=>[t.loaded&&t.charts.selected=="line"?(l(),d(h,{key:0,data:t.charts.years.data,options:t.charts.years.options},null,8,["data","options"])):n("",!0),t.loaded&&t.charts.selected=="bar"?(l(),d(_,{key:1,data:t.charts.years.data,options:t.charts.years.options},null,8,["data","options"])):n("",!0),s("div",E,[s("button",{onClick:e[0]||(e[0]=()=>t.charts.selected="bar"),type:"button",class:"btn btn-outline-primary"},"Диаграмма"),s("button",{onClick:e[1]||(e[1]=()=>t.charts.selected="line"),type:"button",class:"btn btn-outline-primary"},"График")])]),_:1})])])])])])])])])])}}});export{J as default};
