import{_ as c}from"./LineChart.vue_vue_type_script_setup_true_lang-CRwg1KJH.js";import{_ as u}from"./BarChart.vue_vue_type_script_setup_true_lang-BXv4UY0N.js";import{e as p,r as h,o as r,c as m,a as e,f as _,w as b,g as l,h as i}from"./index-Dn4RknuI.js";const f={style:{"margin-top":"20px"},class:"wrapper d-flex flex-column min-vh-100"},y={class:"body flex-grow-1"},g={class:"container-lg px-4"},v={class:"row"},w={class:"col"},C={class:"card mb-4"},k=e("div",{class:"card-header"},[e("span",{class:"small ms-1"},"Кол-во включений и исключений по годам")],-1),S={class:"card-body"},B={class:"p-3"},R={class:"btn-group mt-3",role:"group"},V={data(){return{loaded:!1,charts:{selected:"line",years:{data:{},options:{plugins:{title:{display:!0,text:"По кол-ву внесений/исключений"},subtitle:{display:!0,text:"* - на момент последнего обновления"}}}}}}},methods:{generateYears:a=>{let t=new Date().getFullYear(),s=[];for(;a<t;)s.push((a++).toString());return s.push(`${t} *`),s},filter:(a,t,s)=>{let o=new Date().getFullYear(),n=[];for(;s<=o;)n.push(a.filter(d=>d[t].includes(s.toString())).length),s++;return n}},mounted(){fetch("https://raw.githubusercontent.com/fz255/undesirable-organizations/main/registry.json").then(a=>a.json()).then(a=>{this.charts.years.data={labels:this.generateYears(2015),datasets:[{label:"Внесено",backgroundColor:["#1e88e5"],borderColor:"#1e88e5",data:this.filter(a,"dateIn",2015),pointStyle:"circle",pointRadius:5,pointHoverRadius:10},{label:"Исключено",backgroundColor:"#ff5722",borderColor:"#ff5722",data:this.filter(a,"dateOut",2015),pointStyle:"circle",pointRadius:5,pointHoverRadius:10}]},this.loaded=!0})}},j=p({...V,__name:"StatsView",setup(a){return(t,s)=>{const o=h("center");return r(),m("main",null,[e("div",f,[e("div",y,[e("div",g,[e("div",v,[e("div",w,[e("div",C,[k,e("div",S,[e("div",B,[_(o,null,{default:b(()=>[t.loaded&&t.charts.selected=="line"?(r(),l(c,{key:0,data:t.charts.years.data,options:t.charts.years.options},null,8,["data","options"])):i("",!0),t.loaded&&t.charts.selected=="bar"?(r(),l(u,{key:1,data:t.charts.years.data,options:t.charts.years.options},null,8,["data","options"])):i("",!0),e("div",R,[e("button",{onClick:s[0]||(s[0]=()=>t.charts.selected="bar"),type:"button",class:"btn btn-outline-primary"},"Диаграмма"),e("button",{onClick:s[1]||(s[1]=()=>t.charts.selected="line"),type:"button",class:"btn btn-outline-primary"},"График")])]),_:1})])])])])])])])])])}}});export{j as default};
