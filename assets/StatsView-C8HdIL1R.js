import{_ as h}from"./PieChart.vue_vue_type_script_setup_true_lang-BWEX3Yjv.js";import{_ as f}from"./LineChart.vue_vue_type_script_setup_true_lang-CRwg1KJH.js";import{e as v,r as g,o as l,c as n,a as t,f as p,w as _,h as d,g as c}from"./index-Dn4RknuI.js";const m={style:{"margin-top":"20px"},class:"wrapper d-flex flex-column min-vh-100"},b={class:"body flex-grow-1"},y={class:"container-lg px-4"},k={class:"row row-cols-1 row-cols-md-2"},w={class:"col"},C={class:"card mb-4"},x=t("div",{class:"card-header"},[t("span",{class:"small ms-1"},"По типу записи")],-1),S={class:"card-body"},R={key:0,class:"p-3 text-center"},Y=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Загрузка...")],-1),$=[Y],B={class:"p-3"},V={class:"col"},D={class:"card mb-4"},F=t("div",{class:"card-header"},[t("span",{class:"small ms-1"},"Являются уроженцами Украины")],-1),H={class:"card-body"},N={key:0,class:"p-3 text-center"},j=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Загрузка...")],-1),W=[j],E={class:"p-3"},q={class:"row"},z={class:"col"},A={class:"card mb-4"},G=t("div",{class:"card-header"},[t("span",{class:"small ms-1"},"Кол-во включений по годам")],-1),I={class:"card-body"},J={key:0,class:"p-3 text-center"},K=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Загрузка...")],-1),L=[K],M={class:"p-3"},O={data(){return{loaded:!1,charts:{type:{data:{},options:{}},ukrn:{data:{},options:{}},years:{data:{},options:{}}}}},methods:{generateYears:e=>{let s=new Date().getFullYear(),a=[];for(;e<s;)a.push((e++).toString());return a.push(`${s} *`),a},filter:(e,s,a,o)=>{let r=new Date().getFullYear(),i=[];for(;o<=r;)i.push(e.filter(u=>u[s].includes(o.toString())&&u.is_terr==a).length),o++;return i},filter2:(e,s,a)=>{let o=new Date().getFullYear(),r=[];for(;a<=o;)r.push(e.filter(i=>i[s].includes(a.toString())).length),a++;return r}},mounted(){fetch("https://api.li0ard.rest/fuckcors?url=https://extrem.ishukshin.ru/json/all").then(e=>e.json()).then(e=>{let s=e.filter(r=>r.is_terr==!0).length,a=e.filter(r=>r.is_terr==!1).length,o=e.filter(r=>r.is_ukrainian==!0).length;this.charts.type={data:{labels:["Террористы","Экстремисты"],datasets:[{data:[s,a],backgroundColor:["#ff9f40","#36a2eb"],borderWidth:.5,borderColor:"#ddd"}]},options:{plugins:{title:{display:!0,text:"По типу записи"},subtitle:{display:!0,text:`Всего: ${e.length} записей`}}}},this.charts.ukrn={data:{labels:["Уроженцы","Не уроженцы"],datasets:[{data:[o,e.length-o],backgroundColor:["#36a2eb","#ff9f40"],borderWidth:.5,borderColor:"#ddd"}]},options:{plugins:{title:{display:!0,text:"Уроженцы Украины"},subtitle:{display:!0,text:`Всего: ${e.length} записей`}}}},this.charts.years={data:{labels:this.generateYears(2018),datasets:[{label:"Экстремисты",backgroundColor:["#36a2eb"],borderColor:"#36a2eb",data:this.filter(e,"added_at",!1,2018),pointStyle:"circle",pointRadius:5,pointHoverRadius:10},{label:"Террористы",backgroundColor:["#ff9f40"],borderColor:"#ff9f40",data:this.filter(e,"added_at",!0,2018),pointStyle:"circle",pointRadius:5,pointHoverRadius:10},{label:"Внесено всего",backgroundColor:["#ff6384"],borderColor:"#ff6384",data:this.filter2(e,"added_at",2018),pointStyle:"circle",pointRadius:5,pointHoverRadius:10}]},options:{plugins:{title:{display:!0,text:"По кол-ву внесений (Диаграмма)"},subtitle:{display:!0,text:"* - на момент последнего обновления"}}}},this.loaded=!0})}},U=v({...O,__name:"StatsView",setup(e){return(s,a)=>{const o=g("center");return l(),n("main",null,[t("div",m,[t("div",b,[t("div",y,[t("div",k,[t("div",w,[t("div",C,[x,t("div",S,[p(o,null,{default:_(()=>[s.loaded?d("",!0):(l(),n("div",R,$)),t("div",B,[s.loaded?(l(),c(h,{key:0,data:s.charts.type.data,options:s.charts.type.options},null,8,["data","options"])):d("",!0)])]),_:1})])])]),t("div",V,[t("div",D,[F,t("div",H,[p(o,null,{default:_(()=>[s.loaded?d("",!0):(l(),n("div",N,W)),t("div",E,[s.loaded?(l(),c(h,{key:0,data:s.charts.ukrn.data,options:s.charts.ukrn.options},null,8,["data","options"])):d("",!0)])]),_:1})])])])]),t("div",q,[t("div",z,[t("div",A,[G,t("div",I,[s.loaded?d("",!0):(l(),n("div",J,L)),t("div",M,[s.loaded?(l(),c(f,{key:0,data:s.charts.years.data,options:s.charts.years.options},null,8,["data","options"])):d("",!0)])])])])])])])])])}}});export{U as default};
